Revision: 0df83324241d422592660bb7eb3b413af21fdc59
Patch-set: 14
File: include/android/log.h

22
Fri Oct 14 20:20:11 2016 +0000
Author: Dan Albert <1043845@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 5c0d132b_57d36cbf
Bytes: 289
Whether or not this is true depends on the include order of this file. __ANDROID_API__ is defined as soon as you include a libc header (even for platform code).

    #include <android/log.h> // Won't be defined.

But

    #include <stdio.h>
    #include <android/log.h> // Will be defined.

22
Fri Oct 14 21:23:55 2016 +0000
Author: Elliott Hughes <1003224@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 5c0d132b_57d36cbf
UUID: 5c0d132b_372fd857
Bytes: 86
and if you want to ensure that __ANDROID_API__ is available:

  #include <sys/cdefs.h>

22
Fri Oct 14 22:06:56 2016 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 5c0d132b_372fd857
UUID: 5c0d132b_b71088fe
Bytes: 67
Ok, will squash to __ANDROID_API__ and assume defined further down.

22
Fri Oct 14 22:21:45 2016 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 5c0d132b_b71088fe
UUID: fc9ec720_3ccc7153
Bytes: 73
Hmmm, sys/cdefs.h ... all platforms ... what about host (eg: CTS) builds?

22
Fri Oct 14 23:31:37 2016 +0000
Author: Elliott Hughes <1003224@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: fc9ec720_3ccc7153
UUID: fc9ec720_bcd5e146
Bytes: 145
ah, sucks to be you :-(

  #if defined(__ANDROID__)
  #include <sys/cdefs.h>
  #endif

(glibc has <sys/cdefs.h>, but mac and/or windows doesn't.)

22
Fri Oct 14 23:40:07 2016 +0000
Author: Dan Albert <1043845@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: fc9ec720_bcd5e146
UUID: fc9ec720_7c5c3908
Bytes: 120
Ah, yes. I always forget that liblog is used on the host. Everywhere I said "always defined" only applies to the device.

162:0-194:6
Fri Oct 14 22:06:56 2016 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 5c0d132b_970d84e6
Bytes: 17
Move to log/log.h

419:0-591:6
Fri Oct 14 22:06:56 2016 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 5c0d132b_37a23895
Bytes: 17
move to log/log.h

740:0-761:37
Fri Oct 14 22:06:56 2016 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 5c0d132b_da02016d
Bytes: 151
Move this to log/log.h

Then co-operate with here to ensure that only LOG_ID_MAIN and LOG_ID_EVENTS are defined (they get #define'd here, enum'd there)

947:0-968:53
Fri Oct 14 22:06:56 2016 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 5c0d132b_9a536981
Bytes: 22
move this to log/log.h

File: liblog/liblog.map.txt

13:0-14:27
Fri Oct 14 22:06:56 2016 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 5c0d132b_ba2d0df3
Bytes: 19
not part of the NDK

19:0-22:2
Fri Oct 14 22:06:56 2016 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 5c0d132b_fa338556
Bytes: 19
not part of the NDK

26:0-26:30
Fri Oct 14 22:06:56 2016 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 5c0d132b_9a2a49d7
Bytes: 19
not part of the NDK


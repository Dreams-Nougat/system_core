Revision: f65f8b35880fe4406c5edee38b0d8ab3995a3929
Patch-set: 1
File: init/init_parser.cpp

670
Sat Feb 07 07:22:23 2015 +0000
Author: Greg Hartman <1062926@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: f11a1b66_d3a314c6
Bytes: 236
If I'm reading this the right way, exec is a short-hand way of specifying an anonymous one-shot service. The child is asynchronous, so we'd still have to use execonce for tasks like building the fstab and getting the display resolution.

670
Sat Feb 07 14:48:07 2015 +0000
Author: Nick Kralevich <1003966@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: f11a1b66_d3a314c6
UUID: f1013bf4_3b5c57e4
Bytes: 377
Currently, the init language supports a "start" directive, for starting a defined service. So this would be a replacement for declaring a service and then someone starting it, right?

If so, when would we recommend that someone use this "exec" vs just creating a one-shot service which does the same thing? I want to make sure we're not introducing unnecessary complexity here.

670
Sat Feb 07 15:10:59 2015 +0000
Author: Johan Redestig <1002951@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: f1013bf4_3b5c57e4
UUID: 51292784_2e42e752
Bytes: 220
maybe exec should be start but with with arguments? sometimes it is convenient to be able to do e.g. "exec rm -rf /path/to/whatever" for a few different paths, but declaring a specific service for each is a bit annoying.

670
Sat Feb 07 16:41:37 2015 +0000
Author: Elliott Hughes <1003224@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 51292784_2e42e752
UUID: 111ecf59_3400f0e0
Bytes: 836
i think ghartman is saying the opposite of what i think nnk understood: that as long as this is just equivalent to an anonymous one-shot service, it's not very useful. he needs it to block init from moving forward and running anything else until the child exits. so when this is something worth checking in, it'll be more obviously distinct from one-shot services. (though it might be worth explicitly calling out the relationship and differences in the documentation.)

we should definitely talk to the sony guys next week, since they seem to have some experience with using exec, and my aim is to get something that everyone can use.

(and, yes, we should move the property startup earlier in init so that an exec'ed binary can set properties earlier than they can with this change. i was going to do that as a separate patch though.)


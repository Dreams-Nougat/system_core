Revision: 420a94e7b006b08d9ee0cb3d18b18771c26fa2b5
Patch-set: 1
File: include/android/log.h

90:13-90:32
Thu Oct 06 21:51:30 2016 +0000
Author: Dan Albert <1043845@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 1fe1cce4_04c07a8f
Bytes: 137
I think anything prefixed with "android_" is probably okay. That's essentially a C namespace, and users should stay out of our namespace.

90:13-90:32
Thu Oct 06 22:11:23 2016 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 1fe1cce4_04c07a8f
UUID: 1fe1cce4_a400a6ac
Bytes: 111
I had to snuff this one out as it would be redefined if one did:

#include <android/log.h>
#include <log/log.h>

157:7-157:14
Thu Oct 06 21:51:30 2016 +0000
Author: Dan Albert <1043845@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 1fe1cce4_a49fc6b2
Bytes: 226
If we're going with a feature flag, the name should probably clearly be a feature flag. ANDROID_ENABLE_LOG_MACROS or something? We can set this flag globally in the build system for platform code and NDK code can opt in to it.

157:7-157:14
Thu Oct 06 22:11:23 2016 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 1fe1cce4_a49fc6b2
UUID: 1fe1cce4_64c93e72
Bytes: 952
I have some trouble with that. Build system should not be involved in this, I do not want headers to change flavour just because of the build environment. They must be deterministic and consistent.

I am not 100% behind LOG_TAG as the flag, I would prefer to add an #ifndef ANDROID_LEGACY that the bad code can use if they insist on near zero maintenance. They can add it to their files, or their Android.bp/Android.mk if the new android/log.h hurts them?

We are only going to export _one_ header to the NDK, and we should use the same header internally in exactly the same manner to make sure it is _correct_. Any more than one header and we cause confusion. I can not count the number of times vendors have asked us which header to use internally, or where I caught them picking the wrong one and adding their own flavours of workarounds.

We have to move everyone to the LOG macros, they are in external documentation yet the NDK is lacking them!!!

826:4-826:27
Thu Oct 06 21:51:30 2016 +0000
Author: Dan Albert <1043845@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 1fe1cce4_e499cecd
Bytes: 36
Accidentally hid some functions too.

826:4-826:27
Thu Oct 06 22:11:23 2016 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 1fe1cce4_e499cecd
UUID: 1fe1cce4_c4af7297
Bytes: 171
Good catch, but you do make a good point, I should not worry about functions with android in their names, they should not be ifdef'd out with whatever feature flag we use.


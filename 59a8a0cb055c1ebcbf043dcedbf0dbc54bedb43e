Revision: 59a8a0cb055c1ebcbf043dcedbf0dbc54bedb43e
Patch-set: 4
File: logcat/logcat.cpp

14:18-14:19
Thu Apr 09 16:37:41 2015 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 83c43ed3_9a1f128a
Bytes: 28
add:

#include <sys/cdefs.h>

63:7-63:19
Thu Apr 09 16:37:41 2015 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 237f124e_75aa4250
Bytes: 35
reduces size from 64-bit to 32-bit.

67:0-67:1
Thu Apr 09 16:37:41 2015 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 237f124e_15c5763d
Bytes: 59
__noreturn static void logcat_panic(...) __printflike(2,3);

217:8-217:40
Thu Apr 09 16:37:41 2015 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 83c43ed3_ff5b9887
Bytes: 121
With the change from off_t for g_outByteCount to unsigned for this, you are now truncating the value on 32-bit platforms.

217:8-217:40
Thu Apr 09 16:47:25 2015 +0000
Author: Elliott Hughes <1003224@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 83c43ed3_ff5b9887
UUID: 237f124e_75b08271
Bytes: 239
note that off_t is "int" on LP32. if this actually matters, you should use off64_t or start building with -D_FILE_OFFSET_BITS=64 in your Android.mk, but note that if you have ABI that's an ABI change (which is why i didn't do it globally).

217:8-217:40
Thu Apr 09 16:57:51 2015 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 237f124e_75b08271
UUID: 03868e96_f65bbdd9
Bytes: 298
I stand corrected, but am not _comfortable_ with using unsigned int to hold an off_t from a pedantic type-safe sense.

(because, yes, this is not the first time I panicked, without basis, about off_t and its speckled past ;-} )

Being pedantic in reason, I _can_ slide and accept this as-is though.

217:8-217:40
Thu Apr 09 17:20:40 2015 +0000
Author: Elliott Hughes <1003224@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 03868e96_f65bbdd9
UUID: 23dab2a9_8fb079f5
Bytes: 263
yeah, i don't like seeing vague and unmotivated types like "unsigned int" either. but i think size_t is what you're looking for here. (it's still 32-bit on LP32, but as long as your log rotation value is < 4GiB that's fine. and at least it's intention-revealing.)

383:8-383:27
Thu Apr 09 16:37:41 2015 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 237f124e_755b2259
Bytes: 20
return EXIT_SUCCESS;

482:20-482:28
Thu Apr 09 16:37:41 2015 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 83c43ed3_5af75ad9
Bytes: 20
return EXIT_FAILURE;

614:24-614:32
Thu Apr 09 16:37:41 2015 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 03868e96_766fadf5
Bytes: 20
return EXIT_SUCCESS;

833:8-833:16
Thu Apr 09 16:37:41 2015 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 237f124e_35e35acf
Bytes: 20
return EXIT_SUCCESS;

838:8-838:16
Thu Apr 09 16:37:41 2015 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 03868e96_d6ab1985
Bytes: 20
return EXIT_SUCCESS:

841:8-841:15
Thu Apr 09 16:37:41 2015 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 03868e96_16b661ef
Bytes: 20
return EXIT_SUCCESS;

844:8-844:16
Thu Apr 09 16:37:41 2015 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 83c43ed3_5a259ad5
Bytes: 20
return EXIT_SUCCESS;

900:11-900:12
Thu Apr 09 16:37:41 2015 +0000
Author: Mark Salyzyn <1032276@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 83c43ed3_dae22a1b
Bytes: 12
EXIT_SUCCESS

